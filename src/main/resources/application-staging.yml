spring:
  datasource:
    url: ${REDGUARD_STAGING_DB_URL:jdbc:postgresql://staging-db:5432/redguard}
    username: ${REDGUARD_STAGING_DB_USERNAME:redguard}
    password: ${REDGUARD_STAGING_DB_PASSWORD:redguard}
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: validate
    open-in-view: false
  data:
    redis:
      host: ${REDGUARD_STAGING_REDIS_HOST:staging-redis}
      port: ${REDGUARD_STAGING_REDIS_PORT:6379}
      ssl:
        enabled: false
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  metrics:
    export:
      prometheus:
        enabled: true
    distribution:
      percentiles-histogram:
        http.server.requests: true

redguard:
  rate-limit:
    fallback-policy: ALLOW_ALL
  admin-auth:
    issuer: redguard-admin
    access-token-secret: ${REDGUARD_ADMIN_ACCESS_SECRET}
    refresh-token-secret: ${REDGUARD_ADMIN_REFRESH_SECRET}
    access-token-ttl: 15m
    refresh-token-ttl: 24h
    allowed-clock-skew-seconds: 30
    max-failed-attempts: 5
    lockout-duration-minutes: 15
    token-namespace: admin:auth

logging:
  level:
    com.redguard: INFO
